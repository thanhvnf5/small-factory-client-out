(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[11],{wMsZ:function(e,t,l){"use strict";var r=l("wx14"),o=l("1OyB"),n=l("vuIU"),s=l("JX7q"),i=l("Ji7U"),a=l("md7G"),p=l("foSv"),d=l("rePB"),c=l("79Xs"),u=l("tRbT"),h=l("Z3vd"),g=l("kfFl"),f=l("+JwS"),y=l("EQI2"),m=l("++HY"),b=l("yv+Y"),v=l("kKAo"),D=l("H2TA"),O=l("ZiQX"),C=l("q1tI"),E=l.n(C),L=l("doQp"),j=l.n(L),w=l("/MKj"),T=l("ODXe"),x=l("R/WZ"),I=l("hxuT"),k=l("g3U7"),N=l("dl/7"),U=l("r9w1"),H=l("1waj"),S=l.n(H),F=l("hQyO"),P=l.n(F),A=l("+bXu"),K=l("sWYD"),M=l("mPma"),q=l("K+qn"),R=l("Glqu"),G=l("iSMj"),Q=l("rokU"),W=(l("Hm5U"),l("B0Kt")),X=E.a.createElement;function B(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function J(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?B(Object(l),!0).forEach((function(t){Object(d.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):B(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,r=Object(p.a)(e);if(t){var o=Object(p.a)(this).constructor;l=Reflect.construct(r,arguments,o)}else l=r.apply(this,arguments);return Object(a.a)(this,l)}}var z=function(e){Object(i.a)(l,e);var t=Z(l);function l(){return Object(o.a)(this,l),t.apply(this,arguments)}return Object(n.a)(l,[{key:"getDatePickerHeaderText",value:function(e){return Object(K.a)(e,"dd/MM/yyyy",{locale:this.locale})}}]),l}(M.a),Y={en:G.a,vi:Q.a},_={en:M.a,vi:z},V=Object(x.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},detail:{width:"100%",height:"300px",backgroundColor:e.palette.background.paper},option:{width:"auto","& input":{width:"auto",background:N.a}},popper:{width:"fit-content"},textField:{width:"auto",marginLeft:e.spacing(1),marginRight:e.spacing(1)}}})),$=function(e){var t=V(),l=E.a.useState(!1),o=Object(T.a)(l,2),n=(o[0],o[1],{elementConfig:{type:"input",placeholder:"Nh\u1eadp m\xe3",autoFocus:e.sellCode.autoFocus},validation:{required:!0,minLength:1}}),s={type:"select",placeholder:"Ch\u1ecdn ng\u01b0\u1eddi b\xe1n"},i={required:!0},a=(e.sellWeight.autoFocus,e.sellQuantity.autoFocus,{elementConfig:{type:"text",placeholder:"Ng\xe0y xu\u1ea5t",autoFocus:e.sellDate.autoFocus},validation:{required:!0}}),p={elementConfig:{type:"input",placeholder:"Nh\u1eadp ghi ch\xfa",autoFocus:e.sellNote.autoFocus},validation:{}};return X("form",{onSubmit:e.sellSaveHandler},X(u.a,null,X(u.a,{item:!0,xs:12,className:t.root},X(U.a,Object(r.a)({className:t.textField,required:!0,error:!!(!e.sellCode.valid&e.sellCode.touched),inputProps:{name:"sellCode",id:"sellCode"},label:"M\xe3",margin:"normal"},n.elementConfig,{value:e.sellCode.value,onFocus:function(){return e.sellOnFocus("sellCode")},onChange:function(t){var l=t.target.value;e.sellOnChanged("sellCode",l,n.validation)},onKeyPress:function(t){"Enter"===t.key&&e.sellCodeEnter(t)}})),X(A.a,{id:"employeeId-select",options:e.employeeList.employees,classes:{option:t.option},autoHighlight:!0,value:e.employeeId.value,onFocus:function(){return e.sellOnFocus("employeeId")},onChange:function(t,l){var r=null;l&&(r=l.id),e.sellOnChanged("employeeId",r,i)},groupBy:function(e){return e.deptId},renderGroup:function(t){return[X(I.a,{key:t.group,component:"div"},e.deptList.depts.find((function(e){return e.id==t.group})).name),t.children]},getOptionLabel:function(t){if(t&&t.id)return t.name;var l=e.employeeList.employees.find((function(e){return e.id==t}));return l?l.name:""},getOptionSelected:function(e,t){if(!e||!t)return!1;var l=e.id;l||(l=e);var r=t.id;return r||(r=t),l==r},renderOption:function(e){return X(E.a.Fragment,null,e.name)},renderInput:function(t){return X(U.a,Object(r.a)({},t,{inputProps:J(J({},t.inputProps),{},{name:"employeeId-option",id:"employeeId-option"}),style:{minWidth:200},required:!0,label:"Ng\u01b0\u1eddi xu\u1ea5t",margin:"normal",error:!!(!e.employeeId.valid&e.employeeId.touched)},s))}}),X(q.a,{utils:_.vi,locale:Y.vi},X(R.a,Object(r.a)({clearable:!0,required:!0,error:!!(!e.sellDate.valid&e.sellDate.touched),name:"sellDate",id:"sellDate",format:"dd/MM/yyyy",todayLabel:"H\xf4m nay",cancelLabel:"H\u1ee7y",clearLabel:"X\xf3a",okLabel:"Ch\u1ecdn",label:"Ng\xe0y nh\u1eadp",margin:"normal",value:e.sellDate.value},a.elementConfig,{onFocus:function(){return e.sellOnFocus("sellDate")},onChange:function(t){var l=t;e.sellOnChanged("sellDate",l,a.validation)}}))),X(U.a,{disabled:!0,name:"sellWeightTotal",id:"sellWeightTotal",label:"T\u1ed5ng tr\u1ecdng l\u01b0\u1ee3ng",margin:"normal",value:e.weightTotal}),X(U.a,{disabled:!0,name:"sellQuantityTotal",id:"sellQuantityTotal",label:"T\u1ed5ng s\u1ed1 l\u01b0\u1ee3ng",margin:"normal",value:e.quantityTotal}),X(k.a,Object(r.a)({rowsMin:4,className:t.textField,error:!e.sellNote.valid&e.sellNote.touched?"true":"false",name:"sellNote",id:"sellNote",label:"Ghi ch\xfa",margin:"normal"},p.elementConfig,{value:e.sellNote.value,onFocus:function(){return e.sellOnFocus("sellNote")},onChange:function(t){var l=t.target.value;e.sellOnChanged("sellNote",l,p.validation)}}))),X(u.a,{item:!0,xs:12},X("div",{className:t.detail},X(W.a,{rowCount:e.sellDetails.length,rowGetter:function(t){var l=t.index,r=e.productList.products.find((function(t){return t.id==e.sellDetails[l].productId}));e.sellDetails[l].productName=r?r.name:"";var o=e.goldTypeList.goldTypes.find((function(t){return t.id==e.sellDetails[l].goldTypeId}));e.sellDetails[l].goldTypeName=o?o.name:"";var n=e.goldUnitList.goldUnits.find((function(t){return t.id==e.sellDetails[l].goldUnitId}));return e.sellDetails[l].goldUnitName=n?n.name:"",e.sellDetails[l]},onRowClick:function(t){e.sellDetailEdit(t,t.rowData)},columns:[{width:200,flexGrow:1,label:"S\u1ea3n ph\u1ea9m",dataKey:"productName"},{width:200,flexGrow:1,label:"Lo\u1ea1i v\xe0ng",dataKey:"goldTypeName"},{width:90,label:"Tr\u1ecdng l\u01b0\u1ee3ng",dataKey:"weight",numeric:!0},{width:200,flexGrow:1,label:"\u0110\u01a1n v\u1ecb",dataKey:"goldUnitName"},{width:90,label:"S\u1ed1 l\u01b0\u1ee3ng",dataKey:"quantity",numeric:!0}]}))),X(u.a,{item:!0,xs:12},X(h.a,{variant:"contained",color:"primary",size:"small",startIcon:X(S.a,null),onClick:e.sellCreateHandler},"T\u1ea1o m\u1edbi"),X(h.a,{variant:"contained",color:"primary",size:"small",startIcon:X(P.a,null),disabled:!e.sellDetails.length>0,type:"submit"},"L\u01b0u"))))},ee=(l("tVbE"),l("IsqK"),l("c7k8"),l("iuhU"),E.a.createElement);var te={en:G.a,vi:Q.a},le=Object(x.a)((function(e){return{root:{width:"100%",height:"100%",backgroundColor:e.palette.background.paper},listItem:{display:"flex",alignItems:"center",justifyContent:"flex-start"},rowOdd:{backgroundColor:"#f1f1f1"},rowEven:{backgroundColor:"#f8f8f0"}}}));var re=function(e){var t=le(),l=E.a.useState(!1),r=Object(T.a)(l,2),o=(r[0],r[1]);E.a.useEffect((function(){var e=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test("".concat(window.navigator.userAgent.toLowerCase()));o(Boolean(e))}),[]);return ee("div",{className:t.root},ee(W.a,{rowCount:e.sells.length,rowGetter:function(t){var l,r=t.index;return e.sells[r].sellDate=(l=e.sells[r].sellDate)?"string"===typeof l?l:Object(K.a)(new Date(l),"dd/MM/yyyy",{locale:te.vi}):"",e.sells[r]},onRowClick:function(t){e.sellEdit(t,t.rowData)},columns:[{width:200,flexGrow:1,label:"M\xe3",dataKey:"code"},{width:200,flexGrow:1,label:"M\xf4 t\u1ea3",dataKey:"description"},{width:90,label:"Tr\u1ecdng l\u01b0\u1ee3ng (ly)",dataKey:"weightLyTotal",numeric:!0},{width:90,label:"S\u1ed1 l\u01b0\u1ee3ng",dataKey:"quantityTotal",numeric:!0},{width:120,flexGrow:.5,label:"Ng\xe0y mua",dataKey:"sellDate"}]}))},oe=l("MoyI"),ne=l("gEaM"),se=l("DL1K"),ie=l("eAqC"),ae=l("XTV3"),pe=l("YdsX"),de=l("gc+U"),ce=l("Gb0u"),ue=l("xQkz"),he=l("tErf"),ge=l("vfZy"),fe=l("VEid"),ye=l("0BeC"),me=E.a.createElement;function be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,r=Object(p.a)(e);if(t){var o=Object(p.a)(this).constructor;l=Reflect.construct(r,arguments,o)}else l=r.apply(this,arguments);return Object(a.a)(this,l)}}var ve=function(e){Object(i.a)(l,e);var t=be(l);function l(){var e;Object(o.a)(this,l);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(d.a)(Object(s.a)(e),"state",{isDialogOpen:!1,dialogContent:null,isOpenAlert:!1,alertContent:null,selectedItem:null,selectedItemType:null}),Object(d.a)(Object(s.a)(e),"sellCodeEnterHandler",(function(t){t.preventDefault(),e.props.sellCodeEnterDispatch(t.target.value)})),Object(d.a)(Object(s.a)(e),"sellCreateHandler",(function(t){t.preventDefault(),e.props.sellCreateDispatch()})),Object(d.a)(Object(s.a)(e),"sellAddDetailHandler",(function(t){t.preventDefault();var l={productId:e.props.sellEdit.productId.value,goldTypeId:e.props.sellEdit.goldTypeId.value,goldUnitId:e.props.sellEdit.goldUnitId.value,weight:e.props.sellEdit.sellWeight.value,quantity:e.props.sellEdit.sellQuantity.value};e.props.sellAddDetailDispatch(l)})),Object(d.a)(Object(s.a)(e),"sellDetailEditHandler",(function(t,l){e.props.sellDetailEditDispatch(l)})),Object(d.a)(Object(s.a)(e),"sellSaveHandler",(function(t){t.preventDefault();var l={code:e.props.sellEdit.sellCode.value,employeeId:e.props.sellEdit.employeeId.value,sellDate:e.props.sellEdit.sellDate.value,note:e.props.sellEdit.sellNote.value,sellDetails:e.props.sellEdit.sellDetails};e.props.sellEdit.id?(l.id=e.props.sellEdit.id,l.version=e.props.sellEdit.version,e.props.sellUpdateDispatch(e.props.sellEdit.id,l)):e.props.sellAddDispatch(l),e.setState({selectedItem:null,selectedItemType:null,alertContent:"L\u01b0u"})})),Object(d.a)(Object(s.a)(e),"sellEditHandler",(function(t,l){e.props.sellEditDispatch(l),e.setState({selectedItem:l,selectedItemType:"edit"})})),Object(d.a)(Object(s.a)(e),"sellDeleteHandler",(function(t,l){t.preventDefault(),e.setState({isDialogOpen:!0,dialogContent:l.code+" s\u1ebd b\u1ecb x\xf3a?",selectedItem:l,selectedItemType:"delete"})})),Object(d.a)(Object(s.a)(e),"dialogClose",(function(t,l){t.preventDefault(),l?(e.props.sellDeleteDispatch(e.state.selectedItem.id,e.state.selectedItem.version),e.setState({isDialogOpen:!1,selectedItem:null,selectedItemType:null})):e.setState({isDialogOpen:!1})})),Object(d.a)(Object(s.a)(e),"PaperComponent",(function(e){return me(j.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]'},me(v.a,e))})),Object(d.a)(Object(s.a)(e),"handleCloseAlert",(function(){e.setState({isOpenAlert:!1})})),e}return Object(n.a)(l,[{key:"componentDidMount",value:function(){this.props.deptListDispatch(),this.props.employeeListDispatch(),this.props.productTypeListDispatch(),this.props.productListDispatch(),this.props.goldTypeListDispatch(),this.props.goldUnitListDispatch(),this.props.sellListDispatch()}},{key:"componentDidUpdate",value:function(){(this.props.error&&this.props.error.response&&401==this.props.error.response.status||this.props.deptError&&this.props.deptError.response&&401==this.props.deptError.response.status||this.props.employeeError&&this.props.employeeError.response&&401==this.props.employeeError.response.status||this.props.productTypeError&&this.props.productTypeError.response&&401==this.props.productTypeError.response.status||this.props.productError&&this.props.productError.response&&401==this.props.productError.response.status||this.props.goldTypeError&&this.props.goldTypeError.response&&401==this.props.goldTypeError.response.status||this.props.goldUnitError&&this.props.goldUnitError.response&&401==this.props.goldUnitError.response.status)&&this.props.onLogout()}},{key:"render",value:function(){var e=this;console.log((new Date).toLocaleString()+" ............ SellContainer render");var t=this.props.classes;return me("div",{className:t.root},me(oe.a,{show:this.props.error,modalClosed:this.errorConfirmedHandler},this.props.error?this.props.error.message:"<<Error>>"),me(c.a,{open:this.state.isOpenAlert,onClose:this.handleCloseAlert,autoHideDuration:3e3},me(O.a,{onClose:this.handleCloseAlert,severity:"success"},this.state.alertContent+" th\xe0nh c\xf4ng.")),me(g.a,{open:this.state.isDialogOpen,onClose:function(t){return e.dialogClose(t)},PaperComponent:this.PaperComponent,"aria-labelledby":"draggable-dialog-title"},me(b.a,{style:{cursor:"move"},id:"draggable-dialog-title"},"C\u1ea3nh b\xe1o"),me(y.a,null,me(m.a,null,this.state.dialogContent)),me(f.a,null,me(h.a,{autoFocus:!0,onClick:function(t){return e.dialogClose(t)},color:"primary"},"H\u1ee7y"),me(h.a,{onClick:function(t){return e.dialogClose(t,!0)},color:"primary"},"\u0110\u1ed3ng \xfd"))),me(u.a,null,me(u.a,{item:!0,xs:12},me(v.a,null,"Xu\u1ea5t b\xe1n")),me(u.a,{item:!0,xs:12},me(u.a,{className:t.grid},me(u.a,{item:!0,xs:12},me(u.a,null,me(u.a,{item:!0,xs:12},this.props.sellEdit.waiting?me(ne.a,null):me($,Object(r.a)({},this.props.sellEdit,{deptList:this.props.deptList,employeeList:this.props.employeeList,productTypeList:this.props.productTypeList,productList:this.props.productList,goldTypeList:this.props.goldTypeList,goldUnitList:this.props.goldUnitList,sellOnFocus:this.props.sellOnFocus,sellOnChanged:this.props.sellOnChanged,sellCodeEnter:this.sellCodeEnterHandler,sellCreateHandler:this.sellCreateHandler,sellAddDetailHandler:this.sellAddDetailHandler,sellSaveHandler:this.sellSaveHandler,sellDetailEdit:this.sellDetailEditHandler}))))),me(u.a,{item:!0,xs:12},me(u.a,null,me(u.a,{item:!0,xs:12,className:t.list},this.props.sellList.waiting?me(ne.a,null):me(re,Object(r.a)({},this.props.sellList,{deptList:this.props.deptList,employeeList:this.props.employeeList,productTypeList:this.props.productTypeList,productList:this.props.productList,goldTypeList:this.props.goldTypeList,goldUnitList:this.props.goldUnitList,sellEdit:this.sellEditHandler,sellDelete:this.sellDeleteHandler})))))))))}}]),l}(C.Component);t.a=Object(w.b)((function(e){return{sellEdit:e.sell.sellEdit,sellList:e.sell.sellList,deptList:e.dept.deptList,employeeList:e.employee.employeeList,productTypeList:e.productType.productTypeList,productList:e.product.productList,goldTypeList:e.goldType.goldTypeList,goldUnitList:e.goldUnit.goldUnitList,error:e.sell.error,deptError:e.dept.error,employeeError:e.employee.error,productTypeError:e.productType.error,productError:e.product.error,goldTypeError:e.goldType.error,goldUnitError:e.goldUnit.error}}),(function(e){return{sellOnFocus:function(t){return e(ae.o(t))},sellOnChanged:function(t,l,r){return e(ae.n(t,l,r))},sellCodeEnterDispatch:function(t){return e(ce.l(t))},sellCreateDispatch:function(){return e(ae.d())},sellAddDetailDispatch:function(t){return e(ae.b(t))},sellAddDispatch:function(t){return e(ae.a(t))},sellEditDispatch:function(t){return e(ae.h(t))},sellUpdateDispatch:function(t,l){return e(ae.p(t,l))},sellDetailEditDispatch:function(t){return e(ae.g(t))},sellDeleteDispatch:function(t,l){return e(ae.e(t,l))},sellListDispatch:function(){return e(ae.l())},sellErrorHandledDispatch:function(){return e(ae.k())},deptListDispatch:function(){return e(pe.i())},employeeListDispatch:function(){return e(de.i())},productTypeListDispatch:function(){return e(ue.i())},productListDispatch:function(){return e(he.i())},goldTypeListDispatch:function(){return e(ge.i())},goldUnitListDispatch:function(){return e(fe.i())},onLogout:function(){return e(ye.g())}}}))(Object(se.a)(Object(D.a)((function(e){return{root:{flexGrow:1,height:"100%"},grid:Object(d.a)({height:"100%",width:"100%",alignItems:"flex-start",justifyContent:"flex-start"},e.breakpoints.up("sm"),{display:"flex",flexWrap:"wrap",boxSizing:"border-box"}),list:Object(d.a)({height:"50vh",border:"1px solid #d9dddd"},e.breakpoints.up("sm"),{height:"90vh"}),paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}))(ve),ie.a))}}]);