_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{Iy8V:function(e,t,r){"use strict";r.r(t);var a=r("o0o1"),n=r.n(a),c=r("HaE+"),o=r("wx14"),i=r("q1tI"),s=r.n(i),u=r("1OyB"),p=r("vuIU"),l=r("JX7q"),d=r("Ji7U"),h=r("md7G"),f=r("foSv"),m=r("rePB"),g=r("/MKj"),b=r("VHO0"),v=r("79Xs"),O=r("tRbT"),D=r("Z3vd"),y=r("kfFl"),j=r("+JwS"),C=r("EQI2"),I=r("++HY"),w=r("yv+Y"),N=r("kKAo"),E=r("H2TA"),k=r("ZiQX"),H=r("doQp"),x=r.n(H),L=r("ODXe"),P=r("R/WZ"),S=r("30+C"),F=r("oa/T"),A=r("ADg1"),R=r("1AYd"),T=r("cVXz"),q=r("o4QW"),_=r("r9w1"),M=r("1waj"),X=r.n(M),B=r("hQyO"),U=r.n(B),z=s.a.createElement,J=Object(P.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25ch"}}})),W=function(e){var t=J(),r=s.a.useState(!1),a=Object(L.a)(r,2),n=a[0],c=a[1],i=function(){c(!1)},u=function(){c(!0)},p={elementConfig:{type:"input",placeholder:"Nh\u1eadp t\xean",onFocus:e.purchaseNameFocusHandler,autoFocus:e.purchaseName.autoFocus},validation:{required:!0,minLength:1}},l={type:"select",placeholder:"Ch\u1ecdn s\u1ea3n ph\u1ea9m"},d={required:!0},h={elementConfig:{type:"input",placeholder:"Nh\u1eadp m\xf4 t\u1ea3",onFocus:e.purchaseDescriptionFocusHandler,autoFocus:e.purchaseDescription.autoFocus},validation:{}};z(S.a,null,z(F.a,null,z(O.a,{container:!0},z(O.a,{container:!0,item:!0},z(_.a,Object(o.a)({required:!0,error:!!(!e.purchaseName.valid&e.purchaseName.touched),label:"T\xean",margin:"normal"},p.elementConfig,{value:e.purchaseName.value,onChange:function(t){return e.purchaseNameChanged(t,p.validation)}}))),z(O.a,{container:!0,item:!0},z(A.a,{required:!0,error:!!(!e.productId.valid&e.productId.touched)},z(R.a,{htmlFor:"product-select"},"S\u1ea3n ph\u1ea9m"),z(T.a,Object(o.a)({required:!0,native:!0,error:!!(!e.productId.valid&e.productId.touched),inputProps:{name:"productId",id:"product-select"},open:n},l,{onClose:i,onOpen:u,value:e.productId.value,onChange:function(t){return e.purchaseProductIdChanged(t,d)}}),z("option",{key:"-1","aria-label":"None",value:""}),e.productList.products.map((function(e,t){return z("option",{key:e.id+t,value:e.id},e.name)}))))),z(O.a,{container:!0,item:!0},z(_.a,Object(o.a)({error:!!(!e.purchaseDescription.valid&e.purchaseDescription.touched),label:"M\xf4 t\u1ea3",margin:"normal"},h.elementConfig,{value:e.purchaseDescription.value,onChange:function(t){return e.purchaseDescriptionChanged(t,h.validation)}}))))),z(q.a,null,z(D.a,{variant:"contained",color:"primary",size:"small",startIcon:z(X.a,null),onClick:e.purchaseCreateHandler},"T\u1ea1o m\u1edbi"),z(D.a,{variant:"contained",color:"primary",size:"small",startIcon:z(U.a,null),type:"submit"},"L\u01b0u")));return z("form",{onSubmit:e.purchaseSaveHandler},z(O.a,null,z(O.a,{item:!0,xs:12,className:t.root},z(_.a,Object(o.a)({required:!0,error:!!(!e.purchaseName.valid&e.purchaseName.touched),inputProps:{name:"purchaseName",id:"purchaseName"},label:"T\xean",margin:"normal"},p.elementConfig,{value:e.purchaseName.value,onChange:function(t){return e.purchaseNameChanged(t,p.validation)}})),z(_.a,Object(o.a)({required:!0,select:!0,label:"S\u1ea3n ph\u1ea9m",margin:"normal",error:!!(!e.productId.valid&e.productId.touched),inputProps:{name:"productId",id:"productId"},open:n},l,{onClose:i,onOpen:u,value:e.productId.value,onChange:function(t){return e.purchaseProductIdChanged(t,d)}}),z("option",{key:"-1","aria-label":"None",value:""}),e.productList.products.map((function(e,t){return z("option",{key:e.id+t,value:e.id},e.name)}))),z(_.a,Object(o.a)({error:!!(!e.purchaseDescription.valid&e.purchaseDescription.touched),inputProps:{name:"purchaseDescription",id:"purchaseDescription"},label:"M\xf4 t\u1ea3",margin:"normal"},h.elementConfig,{value:e.purchaseDescription.value,onChange:function(t){return e.purchaseDescriptionChanged(t,h.validation)}}))),z(O.a,{item:!0,xs:12},z(D.a,{variant:"contained",color:"primary",size:"small",startIcon:z(X.a,null),onClick:e.purchaseCreateHandler},"T\u1ea1o m\u1edbi"),z(D.a,{variant:"contained",color:"primary",size:"small",startIcon:z(U.a,null),type:"submit"},"L\u01b0u"))))},K=r("Ff2n"),Q=r("tVbE"),V=r("56Ss"),Z=r("PsDL"),Y=r("IsqK"),G=r("FrwU"),$=r.n(G),ee=r("MPUk"),te=r.n(ee),re=r("c7k8"),ae=r("iR1w"),ne=r("iuhU"),ce=s.a.createElement;function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se=Object(P.a)((function(e){return{root:{width:"100%",height:"100%",backgroundColor:e.palette.background.paper},listItem:{display:"flex",alignItems:"center",justifyContent:"flex-start"},rowOdd:{backgroundColor:"#f1f1f1"},rowEven:{backgroundColor:"#f8f8f0"}}}));function ue(e){var t=e.index,r=e.style,a=e.data;return ce(Q.a,{className:Object(ne.a)(a.classes.listItem,t%2===0?a.classes.rowEven:a.classes.rowOdd),style:ie({},r),key:t},ce(V.a,null,ce(Z.a,{edge:"end","aria-label":"edit",onClick:function(e){return a.purchaseEdit(e,a.purchases[t])}},ce(te.a,null))),ce(Y.a,{primary:a.purchases[t].name}),ce(Y.a,{primary:function(e,t){var r=e.products.filter((function(e){return e.id===t}))[0];return r?r.name:""}(a.productList,a.purchases[t].productId)}),a.isMobile?null:ce(Y.a,{primary:a.purchases[t].description}),ce(V.a,null,ce(Z.a,{edge:"end","aria-label":"delete",onClick:function(e){return a.purchaseDelete(e,a.purchases[t])}},ce($.a,null))))}var pe=function(e){var t=se(),r=s.a.useState(!1),a=Object(L.a)(r,2),n=a[0],c=a[1];s.a.useEffect((function(){var e=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test("".concat(window.navigator.userAgent.toLowerCase()));c(Boolean(e))}),[]);var u=function(e){var t=e.deltaY;console.log((new Date).toLocaleString()+" ............ handleOnWheel()",t)},p=Object(i.forwardRef)((function(e,t){var r=e.style,a=Object(K.a)(e,["style"]);return ce("div",Object(o.a)({ref:t,style:ie(ie({},r),{},{top:"".concat(parseFloat(r.top)+10,"px"),height:"".concat(parseFloat(r.height)+20,"px")})},a))})),l=Object(i.forwardRef)((function(e,t){return ce("div",Object(o.a)({ref:t,onWheel:u},e))}));return ce("div",{className:t.root},ce(re.a,null,(function(r){return ce(ae.a,{width:r.width,height:r.height,itemSize:20,itemCount:e.purchases.length,itemData:{purchases:e.purchases,productList:e.productList,purchaseEdit:e.purchaseEdit,purchaseDelete:e.purchaseDelete,isMobile:n,classes:t},innerElementType:p,outerElementType:l},ue)})))},le=r("MoyI"),de=r("gEaM"),he=r("DL1K"),fe=r("eAqC"),me=r("nXbN"),ge=r("tErf"),be=r("0BeC"),ve=s.a.createElement;function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Object(f.a)(e);if(t){var n=Object(f.a)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Object(h.a)(this,r)}}var De=function(e){Object(d.a)(r,e);var t=Oe(r);function r(){var e;Object(u.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return e=t.call.apply(t,[this].concat(n)),Object(m.a)(Object(l.a)(e),"state",{isDialogOpen:!1,dialogContent:null,isOpenAlert:!1,alertContent:null,selectedItem:null,selectedItemType:null}),Object(m.a)(Object(l.a)(e),"purchaseNameFocusHandler",(function(t){t.preventDefault(),e.props.purchaseNameFocusDispatch()})),Object(m.a)(Object(l.a)(e),"purchaseNameChangedHandler",(function(t,r){t.preventDefault(),e.props.purchaseNameChangedDispatch(t.target.value,r)})),Object(m.a)(Object(l.a)(e),"purchaseProductIdChangeHandler",(function(t,r){t.preventDefault(),e.props.purchaseProductIdChangeDispatch(t.target.value,r)})),Object(m.a)(Object(l.a)(e),"purchaseDescriptionFocusHandler",(function(){e.props.purchaseDescriptionFocusDispatch()})),Object(m.a)(Object(l.a)(e),"purchaseDescriptionChangedHandler",(function(t,r){t.preventDefault(),e.props.purchaseDescriptionChangedDispatch(t.target.value,r)})),Object(m.a)(Object(l.a)(e),"purchaseCreateHandler",(function(t){t.preventDefault(),e.props.purchaseCreateDispatch()})),Object(m.a)(Object(l.a)(e),"purchaseSaveHandler",(function(t){t.preventDefault();var r={name:e.props.purchaseEdit.purchaseName.value,productId:e.props.purchaseEdit.productId.value,description:e.props.purchaseEdit.purchaseDescription.value};e.props.purchaseEdit.id?e.props.purchaseUpdateDispatch(e.props.purchaseEdit.id,r):e.props.purchaseAddDispatch(r),e.setState({selectedItem:null,selectedItemType:null,alertContent:"L\u01b0u"})})),Object(m.a)(Object(l.a)(e),"purchaseEditHandler",(function(t,r){t.preventDefault(),e.props.purchaseEditDispatch(r),e.setState({selectedItem:r,selectedItemType:"edit"})})),Object(m.a)(Object(l.a)(e),"purchaseDeleteHandler",(function(t,r){t.preventDefault(),e.setState({isDialogOpen:!0,dialogContent:r.name+" s\u1ebd b\u1ecb x\xf3a?",selectedItem:r,selectedItemType:"delete"})})),Object(m.a)(Object(l.a)(e),"dialogClose",(function(t,r){t.preventDefault(),r?(e.props.purchaseDeleteDispatch(e.state.selectedItem.key),e.setState({isDialogOpen:!1,selectedItem:null,selectedItemType:null})):e.setState({isDialogOpen:!1})})),Object(m.a)(Object(l.a)(e),"PaperComponent",(function(e){return ve(x.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]'},ve(N.a,e))})),Object(m.a)(Object(l.a)(e),"handleCloseAlert",(function(){e.setState({isOpenAlert:!1})})),e}return Object(p.a)(r,[{key:"componentDidMount",value:function(){this.props.productListDispatch(),this.props.purchaseListDispatch()}},{key:"componentDidUpdate",value:function(){this.props.error&&this.props.error.response&&401==this.props.error.response.status&&this.props.onLogout()}},{key:"render",value:function(){var e=this;console.log((new Date).toLocaleString()+" ............ PurchaseContainer render");var t=this.props.classes;return ve("div",{className:t.root},ve(le.a,{show:this.props.error,modalClosed:this.errorConfirmedHandler},this.props.error?this.props.error.message:"<<Error>>"),ve(v.a,{open:this.state.isOpenAlert,onClose:this.handleCloseAlert,autoHideDuration:3e3},ve(k.a,{onClose:this.handleCloseAlert,severity:"success"},this.state.alertContent+" th\xe0nh c\xf4ng.")),ve(y.a,{open:this.state.isDialogOpen,onClose:function(t){return e.dialogClose(t)},PaperComponent:this.PaperComponent,"aria-labelledby":"draggable-dialog-title"},ve(w.a,{style:{cursor:"move"},id:"draggable-dialog-title"},"C\u1ea3nh b\xe1o"),ve(C.a,null,ve(I.a,null,this.state.dialogContent)),ve(j.a,null,ve(D.a,{autoFocus:!0,onClick:function(t){return e.dialogClose(t)},color:"primary"},"H\u1ee7y"),ve(D.a,{onClick:function(t){return e.dialogClose(t,!0)},color:"primary"},"\u0110\u1ed3ng \xfd"))),ve(O.a,null,ve(O.a,{item:!0,xs:12},ve(N.a,null,"Nh\u1eadp mua")),ve(O.a,{item:!0,xs:12},ve(O.a,{className:t.grid},ve(O.a,{item:!0,xs:12},ve(O.a,null,ve(O.a,{item:!0,xs:12},this.props.purchaseEdit.waiting?ve(de.a,null):ve(W,Object(o.a)({},this.props.purchaseEdit,{productList:this.props.productList,purchaseNameFocusHandler:this.purchaseNameFocusHandler,purchaseNameChanged:this.purchaseNameChangedHandler,purchaseProductIdChanged:this.purchaseProductIdChangeHandler,purchaseDescriptionFocusHandler:this.purchaseDescriptionFocusHandler,purchaseDescriptionChanged:this.purchaseDescriptionChangedHandler,purchaseCreateHandler:this.purchaseCreateHandler,purchaseSaveHandler:this.purchaseSaveHandler}))))),ve(O.a,{item:!0,xs:12},ve(O.a,null,ve(O.a,{item:!0,xs:12,className:t.list},this.props.purchaseList.waiting?ve(de.a,null):ve(pe,Object(o.a)({},this.props.purchaseList,{productList:this.props.productList,purchaseEdit:this.purchaseEditHandler,purchaseDelete:this.purchaseDeleteHandler})))))))))}}]),r}(i.Component),ye=Object(g.b)((function(e){return{purchaseEdit:e.purchase.purchaseEdit,purchaseList:e.purchase.purchaseList,productList:e.product.productList,error:e.purchase.error}}),(function(e){return{purchaseNameFocusDispatch:function(){return e(me.n())},purchaseNameChangedDispatch:function(t,r){return e(me.m(t,r))},purchaseProductIdChangeDispatch:function(t,r){return e(me.o(t,r))},purchaseDescriptionFocusDispatch:function(){return e(me.g())},purchaseDescriptionChangedDispatch:function(t,r){return e(me.f(t,r))},purchaseCreateDispatch:function(){return e(me.c())},purchaseAddDispatch:function(t){return e(me.a(t))},purchaseEditDispatch:function(t){return e(me.h(t))},purchaseUpdateDispatch:function(t,r){return e(me.p(t,r))},purchaseDeleteDispatch:function(t){return e(me.d(t))},purchaseListDispatch:function(){return e(me.k())},purchaseErrorHandledDispatch:function(){return e(me.j())},productListDispatch:function(){return e(ge.k())},onLogout:function(){return e(be.g())}}}))(Object(he.a)(Object(E.a)((function(e){return{root:{flexGrow:1,height:"100%"},grid:Object(m.a)({height:"100%",width:"100%",alignItems:"flex-start",justifyContent:"flex-start"},e.breakpoints.up("sm"),{display:"flex",flexWrap:"wrap",boxSizing:"border-box"}),list:Object(m.a)({height:"50vh",border:"1px solid #d9dddd"},e.breakpoints.up("sm"),{height:"90vh"}),paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}))(De),fe.a)),je=s.a.createElement;function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Object(f.a)(e);if(t){var n=Object(f.a)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Object(h.a)(this,r)}}var Ie=function(e){Object(d.a)(r,e);var t=Ce(r);function r(){var e;Object(u.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return e=t.call.apply(t,[this].concat(n)),Object(m.a)(Object(l.a)(e),"state",{}),Object(m.a)(Object(l.a)(e),"generateBody",(function(){var e="";return e=e=localStorage.getItem("leftSelectedKey"),je("div",{style:{height:"100%"}},"purchase"===e?je(ye,null):null)})),e}return Object(p.a)(r,[{key:"render",value:function(){return console.log((new Date).toLocaleString()+" ............ BringInContainer render"),je(b.a,null,this.generateBody())}}]),r}(s.a.Component),we=Object(g.b)((function(e){return{leftDrawerItem:e.common.leftDrawerItem}}),(function(e){return{}}))(Ie),Ne=r("urNJ"),Ee=r("kiXb"),ke=s.a.createElement;function He(e){return ke(Ne.a,Object(o.a)({},e,{title:"BringIn",leftDrawerItems:e.items}),ke(we,null))}He.getInitialProps=function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{namespacesRequired:["common","home","layout"],currentPage:"/bringIn",items:[{key:"purchase",label:"Nh\u1eadp mua"}]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=Object(Ee.withTranslation)("home")(He)},gx8Z:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bringIn",function(){return r("Iy8V")}])}},[["gx8Z",1,2,0,3,4,5,6]]]);